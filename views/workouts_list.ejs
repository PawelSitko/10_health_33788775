<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Your workouts ‚Äì Health Tracker</title>
    <style>
      body { margin:0; font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif; background:#f5f7fb; }
      .page { min-height:100vh; display:flex; align-items:flex-start; justify-content:center; padding:40px 16px; }
      .card { max-width:1000px; width:100%; background:#fff; border-radius:18px; box-shadow:0 20px 45px rgba(15,23,42,0.12); padding:32px 40px; }
      .card-header { display:flex; flex-direction:column; gap:8px; margin-bottom:24px; }
      .card-header h1 { margin:0; font-size:28px; }
      .nav-links { display:flex; gap:16px; font-size:14px; }
      .nav-links a { text-decoration:none; color:#2563eb; }
      .nav-links a:hover { text-decoration:underline; }
      .actions-row { display:flex; gap:12px; margin-bottom:16px; }
      .btn { border:none; border-radius:999px; padding:8px 16px; background:#2563eb; color:white; font-size:14px; cursor:pointer; text-decoration:none; display:inline-block; }
      .btn.secondary { background:#e5e7eb; color:#111827; }
      .btn:hover { filter:brightness(0.95); }
      .error { margin-bottom:16px; color:#b91c1c; background:#fee2e2; padding:8px 10px; border-radius:8px; font-size:14px; }
      table { width:100%; border-collapse:collapse; font-size:14px; margin-top:8px; }
      th, td { padding:8px 10px; border-bottom:1px solid #e5e7eb; text-align:left; }
      th { background:#f9fafb; font-weight:600; }
    </style>
  </head>

  <body>
    <main class="page">
      <section class="card">
        <header class="card-header">
          <h1>Your workouts</h1>
          <nav class="nav-links">
            <a href="<%= basePath %>/">üè† Home</a>
            <a href="<%= basePath %>/users/login">üîë Login</a>
            <a href="<%= basePath %>/users/register">üìù Register</a>
            <a href="<%= basePath %>/workouts/list">üí™ Workouts</a>
          </nav>
        </header>

        <section>
          <% if (user) { %>
            <p>Logged in as <strong><%= user.username %></strong>.</p>
          <% } %>

          <div class="actions-row">
            <a class="btn" href="<%= basePath %>/workouts/add">‚ûï Add workout</a>
            <a class="btn secondary" href="<%= basePath %>/workouts/search">üîç Search</a>
          </div>

          <% if (error) { %>
            <p class="error"><%= error %></p>
          <% } %>

          <% if (workouts && workouts.length > 0) { %>
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Type</th>
                  <th>Duration (min)</th>
                  <th>Intensity</th>
                  <th>Notes</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <% workouts.forEach(w => { %>
                  <tr>
                    <td>
                      <%= w.workout_date
                          ? (w.workout_date.toISOString
                              ? w.workout_date.toISOString().slice(0,10)
                              : w.workout_date)
                          : '' %>
                    </td>
                    <td><%= w.workout_type || '' %></td>
                    <td><%= w.duration_minutes || '' %></td>
                    <td><%= w.intensity || '' %></td>
                    <td><%= w.notes || '' %></td>
                    <td>
                      <a href="<%= basePath %>/workouts/edit/<%= w.id %>">Edit</a>
                      |
                      <a href="<%= basePath %>/workouts/delete/<%= w.id %>">Delete</a>
                    </td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
          <% } else { %>
            <p>You don‚Äôt have any workouts yet.</p>
          <% } %>
        </section>
      </section>
    </main>
  </body>
</html>
