<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Search Workouts</title>
  </head>
  <body>
    <h1>Search Workouts</h1>

    <p><a href="/">Home</a> | <a href="/workouts/list">View workouts</a> | <a href="/workouts/add">Add workout</a></p>

    <form method="POST" action="/workouts/search">
      <p>
        <label>Workout type contains:
          <input type="text" name="workout_type" value="<%= (query && query.workout_type) || '' %>">
        </label>
        <button type="submit">Search</button>
      </p>
    </form>

    <% if (workouts === null) { %>
      <p>Enter a workout type and click search.</p>
    <% } else if (workouts.length === 0) { %>
      <p>No workouts matched your search.</p>
    <% } else { %>
      <h2>Search results</h2>
      <table border="1" cellpadding="4">
        <thead>
          <tr>
            <th>ID</th>
            <th>User ID</th>
            <th>Username</th>
            <th>Date</th>
            <th>Type</th>
            <th>Duration (mins)</th>
            <th>Intensity</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <% workouts.forEach(function(w) { %>
            <tr>
              <td><%= w.id %></td>
              <td><%= w.user_id %></td>
              <td><%= w.username || '' %></td>
              <td><%= w.workout_date.toISOString().substring(0, 10) %></td>
              <td><%= w.workout_type %></td>
              <td><%= w.duration_minutes %></td>
              <td><%= w.intensity %></td>
              <td><%= w.notes || '' %></td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    <% } %>
  </body>
</html>
